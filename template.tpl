___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Eye One Widget",
  "categories": ["CHAT", "SALES"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Add Eye One widget integration to your website",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "apiKey",
    "displayName": "API Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const createArgumentsQueue = require('createArgumentsQueue');
const createQueue= require('createQueue');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');

const url = 'https://static.eye.one/widget/widget.js?v0.1';

if (queryPermission('inject_script', url)) {
  
  injectScript(url, data.gtmOnSuccess, data.gtmOnFailure, url);
  
  const e1w = createArgumentsQueue('e1w', 'e1w.q');
  const e1widget = createQueue('eyeone-widget');
  e1widget("e1w");
  e1w('init', data.apiKey);
  
}

// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "e1w"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "e1w.q"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "eyeone-widget"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://static.eye.one/widget/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 29/06/2023, 10:42:17


